---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "scm_auto_vpn_cluster Resource - scm"
subcategory: ""
description: |-
  AutoVpnCluster resource
---

# scm_auto_vpn_cluster (Resource)

AutoVpnCluster resource

## Example Usage

```terraform
#
# Auto VPN Cluster Configuration
#
resource "scm_auto_vpn_cluster" "test_cluster" {
  name         = "test-will-be-deleted"
  type         = "hub-spoke"
  enable_sdwan = true

  #
  # Gateway Configuration (Hub)
  #
  gateways = [
    {
      name                       = "008199000033876" # Serial Number / Device ID
      bgp_redistribution_profile = "All-Connected-Routes"
      priority                   = 1
      logical_router             = "untrust-logical-router"

      # Note: 'interfaces' is also a list of objects inside the gateway object
      interfaces = [
        {
          name = "$mesh-interface" # Replace with actual interface name or reference

          sdwan_link_settings = {
            sdwan_interface_profile = "test-sdwan-profile"
            sdwan_gateway           = "$mesh-subnet-gateway-address"

            upstream_nat = {
              enable = false
            }
          }
        }
      ]
    }
  ]

  #
  # Branch Configuration
  #
  branches = [
    {
      name                       = "008199000033879" # Serial Number / Device ID
      bgp_redistribution_profile = "All-Connected-Routes"
      logical_router             = "trust-logical-router"

      # Note: 'interfaces' is also a list of objects inside the branch object
      interfaces = [
        {
          name = "$trust-interface" # Replace with actual interface name or reference

          sdwan_link_settings = {
            sdwan_interface_profile = "test-sdwan-profile"

            upstream_nat = {
              enable = true

              static_ip = {
                ip_address = "$trust-subnet-gateway-address"
              }
            }
          }
        }
      ]
    }
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `branches` (Attributes List) Branches (see [below for nested schema](#nestedatt--branches))
- `enable_mesh_between_hubs` (Boolean) Enable mesh between hubs?
- `enable_mesh_interconnect` (Boolean) Enable mesh interconnect?
- `enable_sdwan` (Boolean) Enable SD-WAN?
- `gateways` (Attributes List) Hubs (see [below for nested schema](#nestedatt--gateways))
- `name` (String) VPN cluster name
- `type` (String) VPN cluster type

### Read-Only

- `id` (String) UUID of the resource
- `tfid` (String) The Terraform ID.

<a id="nestedatt--branches"></a>
### Nested Schema for `branches`

Optional:

- `bgp_redistribution_profile` (String) BGP redistribution profile
- `interfaces` (Attributes List) Interfaces (see [below for nested schema](#nestedatt--branches--interfaces))
- `logical_router` (String) Router
- `name` (String) Branch firewall serial number
- `private_interfaces` (Attributes List) Private interfaces (see [below for nested schema](#nestedatt--branches--private_interfaces))
- `site` (String) Site name

<a id="nestedatt--branches--interfaces"></a>
### Nested Schema for `branches.interfaces`

Optional:

- `dhcp_ip` (String) DHCP IP
- `name` (String) Ethernet interface
- `sdwan_link_settings` (Attributes) Sdwan link settings (see [below for nested schema](#nestedatt--branches--interfaces--sdwan_link_settings))

<a id="nestedatt--branches--interfaces--sdwan_link_settings"></a>
### Nested Schema for `branches.interfaces.sdwan_link_settings`

Optional:

- `sdwan_gateway` (String) Next hop gateway
- `sdwan_interface_profile` (String) SD-WAN interface profile
- `upstream_nat` (Attributes) Upstream nat (see [below for nested schema](#nestedatt--branches--interfaces--sdwan_link_settings--upstream_nat))

<a id="nestedatt--branches--interfaces--sdwan_link_settings--upstream_nat"></a>
### Nested Schema for `branches.interfaces.sdwan_link_settings.upstream_nat`

Optional:

- `enable` (Boolean) Upstream NAT?
- `static_ip` (Attributes) Static ip (see [below for nested schema](#nestedatt--branches--interfaces--sdwan_link_settings--upstream_nat--static_ip))

<a id="nestedatt--branches--interfaces--sdwan_link_settings--upstream_nat--static_ip"></a>
### Nested Schema for `branches.interfaces.sdwan_link_settings.upstream_nat.static_ip`

Optional:

- `fqdn` (String) FQDN
> ℹ️ **Note:** You must specify exactly one of `fqdn` and `ip_address`.
- `ip_address` (String) IP address
> ℹ️ **Note:** You must specify exactly one of `fqdn` and `ip_address`.





<a id="nestedatt--branches--private_interfaces"></a>
### Nested Schema for `branches.private_interfaces`

Optional:

- `name` (String) Ethernet interface
- `sdwan_link_settings` (Attributes) Sdwan link settings (see [below for nested schema](#nestedatt--branches--private_interfaces--sdwan_link_settings))

<a id="nestedatt--branches--private_interfaces--sdwan_link_settings"></a>
### Nested Schema for `branches.private_interfaces.sdwan_link_settings`

Optional:

- `sdwan_gateway` (String) Next hop gateway
- `sdwan_interface_profile` (String) SD-WAN interface profile
- `upstream_nat` (Attributes) Upstream nat (see [below for nested schema](#nestedatt--branches--private_interfaces--sdwan_link_settings--upstream_nat))

<a id="nestedatt--branches--private_interfaces--sdwan_link_settings--upstream_nat"></a>
### Nested Schema for `branches.private_interfaces.sdwan_link_settings.upstream_nat`

Optional:

- `enable` (Boolean) Upstream NAT?
- `static_ip` (Attributes) Static ip (see [below for nested schema](#nestedatt--branches--private_interfaces--sdwan_link_settings--upstream_nat--static_ip))

<a id="nestedatt--branches--private_interfaces--sdwan_link_settings--upstream_nat--static_ip"></a>
### Nested Schema for `branches.private_interfaces.sdwan_link_settings.upstream_nat.static_ip`

Optional:

- `fqdn` (String) FQDN
> ℹ️ **Note:** You must specify exactly one of `fqdn` and `ip_address`.
- `ip_address` (String) IP address
> ℹ️ **Note:** You must specify exactly one of `fqdn` and `ip_address`.






<a id="nestedatt--gateways"></a>
### Nested Schema for `gateways`

Optional:

- `allow_dia_vpn_failover` (Boolean) Allow DIA to VPN failover on branch device for the hub?
- `bgp_redistribution_profile` (String) BGP redistribution file
- `interfaces` (Attributes List) Interfaces (see [below for nested schema](#nestedatt--gateways--interfaces))
- `logical_router` (String) Router
- `name` (String) Hub firewall serial number
- `priority` (String) Priority
- `private_interfaces` (Attributes List) Private interfaces (see [below for nested schema](#nestedatt--gateways--private_interfaces))
- `site` (String) Site name

<a id="nestedatt--gateways--interfaces"></a>
### Nested Schema for `gateways.interfaces`

Optional:

- `dhcp_ip` (String) DHCP IP
- `name` (String) Ethernet interface
- `sdwan_link_settings` (Attributes) Sdwan link settings (see [below for nested schema](#nestedatt--gateways--interfaces--sdwan_link_settings))

<a id="nestedatt--gateways--interfaces--sdwan_link_settings"></a>
### Nested Schema for `gateways.interfaces.sdwan_link_settings`

Optional:

- `sdwan_gateway` (String) Next hop gateway
- `sdwan_interface_profile` (String) SD-WAN interface profile
- `upstream_nat` (Attributes) Upstream nat (see [below for nested schema](#nestedatt--gateways--interfaces--sdwan_link_settings--upstream_nat))

<a id="nestedatt--gateways--interfaces--sdwan_link_settings--upstream_nat"></a>
### Nested Schema for `gateways.interfaces.sdwan_link_settings.upstream_nat`

Optional:

- `enable` (Boolean) Upstream NAT?
- `static_ip` (Attributes) Static ip (see [below for nested schema](#nestedatt--gateways--interfaces--sdwan_link_settings--upstream_nat--static_ip))

<a id="nestedatt--gateways--interfaces--sdwan_link_settings--upstream_nat--static_ip"></a>
### Nested Schema for `gateways.interfaces.sdwan_link_settings.upstream_nat.static_ip`

Optional:

- `fqdn` (String) FQDN
> ℹ️ **Note:** You must specify exactly one of `fqdn` and `ip_address`.
- `ip_address` (String) IP address
> ℹ️ **Note:** You must specify exactly one of `fqdn` and `ip_address`.





<a id="nestedatt--gateways--private_interfaces"></a>
### Nested Schema for `gateways.private_interfaces`

Optional:

- `name` (String) Ethernet interface
- `sdwan_link_settings` (Attributes) Sdwan link settings (see [below for nested schema](#nestedatt--gateways--private_interfaces--sdwan_link_settings))

<a id="nestedatt--gateways--private_interfaces--sdwan_link_settings"></a>
### Nested Schema for `gateways.private_interfaces.sdwan_link_settings`

Optional:

- `sdwan_gateway` (String) Next hop gateway
- `sdwan_interface_profile` (String) SD-WAN interface profile
- `upstream_nat` (Attributes) Upstream nat (see [below for nested schema](#nestedatt--gateways--private_interfaces--sdwan_link_settings--upstream_nat))

<a id="nestedatt--gateways--private_interfaces--sdwan_link_settings--upstream_nat"></a>
### Nested Schema for `gateways.private_interfaces.sdwan_link_settings.upstream_nat`

Optional:

- `enable` (Boolean) Upstream NAT?
- `static_ip` (Attributes) Static ip (see [below for nested schema](#nestedatt--gateways--private_interfaces--sdwan_link_settings--upstream_nat--static_ip))

<a id="nestedatt--gateways--private_interfaces--sdwan_link_settings--upstream_nat--static_ip"></a>
### Nested Schema for `gateways.private_interfaces.sdwan_link_settings.upstream_nat.static_ip`

Optional:

- `fqdn` (String) FQDN
> ℹ️ **Note:** You must specify exactly one of `fqdn` and `ip_address`.
- `ip_address` (String) IP address
> ℹ️ **Note:** You must specify exactly one of `fqdn` and `ip_address`.


## Import

The following command can be used to import a resource not managed by Terraform:

```bash
terraform import scm_auto_vpn_cluster.example folder:::id
```

or

```bash
terraform import scm_auto_vpn_cluster.example :snippet::id
```

or

```bash
terraform import scm_auto_vpn_cluster.example ::device:id
```

**Note:** Please provide just one of folder, snippet, or device for the import command.

