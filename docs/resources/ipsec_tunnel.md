---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "scm_ipsec_tunnel Resource - scm"
subcategory: ""
description: |-
  IpsecTunnel resource
---

# scm_ipsec_tunnel (Resource)

IpsecTunnel resource

## Example Usage

```terraform
## 1. Define the IKE Crypto Profile (IKE Phase 1)
# Note: The resource name is plural: "scm_ike_crypto_profile"
resource "scm_ike_crypto_profile" "example" {
  name       = "example-ike-crypto"
  folder     = "Remote Networks"
  hash       = ["sha256"]
  dh_group   = ["group14"]
  encryption = ["aes-256-cbc"]
}

## 2. Define the IPsec Crypto Profile (IKE Phase 2)
# Note: The resource name is plural and nested blocks now use an equals sign (=).
resource "scm_ipsec_crypto_profile" "example" {
  name   = "PaloAlto-Networks-IPSec-Crypto"
  folder = "Remote Networks"

  esp = {
    encryption     = ["aes-256-gcm"]
    authentication = ["sha256"]
  }

  dh_group = "group14"

  lifetime = {
    hours = 8
  }
}

## 3. Define the IKE Gateway
# Note: The resource name is plural and nested blocks now use an equals sign (=).
resource "scm_ike_gateway" "example" {
  name   = "example-gateway"
  folder = "Remote Networks"

  peer_address = {
    ip = "1.1.1.1"
  }

  authentication = {
    pre_shared_key = {
      # In a real-world scenario, use a variable marked as sensitive for the key.
      key = "secret"
    }
  }

  protocol = {
    ikev1 = {
      ike_crypto_profile = scm_ike_crypto_profile.example.name
    }
  }
}

## 4. Define the IPsec Tunnel
# Note: Nested 'auto_key' block uses an equals sign (=).
resource "scm_ipsec_tunnel" "example" {
  name                     = "example-tunnel"
  folder                   = "Remote Networks"
  tunnel_interface         = "tunnel"
  anti_replay              = true
  copy_tos                 = false
  enable_gre_encapsulation = false

  auto_key = {
    ike_gateway = [{
      name = scm_ike_gateway.example.name
    }]

    ipsec_crypto_profile = scm_ipsec_crypto_profile.example.name
  }

  depends_on = [
    scm_ike_gateway.example
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `auto_key` (Attributes) Auto key (see [below for nested schema](#nestedatt--auto_key))
- `name` (String) Alphanumeric string begin with letter: [0-9a-zA-Z._-]

### Optional

- `anti_replay` (Boolean) Enable Anti-Replay check on this tunnel
- `copy_tos` (Boolean) Copy IP TOS bits from inner packet to IPSec packet (not recommended)
- `device` (String) The device in which the resource is defined
> ℹ️ **Note:** You must specify exactly one of `device`, `folder`, and `snippet`.
- `enable_gre_encapsulation` (Boolean) allow GRE over IPSec
- `folder` (String) The folder in which the resource is defined
> ℹ️ **Note:** You must specify exactly one of `device`, `folder`, and `snippet`.
- `snippet` (String) The snippet in which the resource is defined
> ℹ️ **Note:** You must specify exactly one of `device`, `folder`, and `snippet`.
- `tunnel_interface` (String) Tunnel interface variable or hardcoded tunnel. Default will be tunnels.
- `tunnel_monitor` (Attributes) Tunnel monitor (see [below for nested schema](#nestedatt--tunnel_monitor))

### Read-Only

- `id` (String) UUID of the resource
- `tfid` (String) The Terraform ID.

<a id="nestedatt--auto_key"></a>
### Nested Schema for `auto_key`

Required:

- `ike_gateway` (Attributes List) Ike gateway (see [below for nested schema](#nestedatt--auto_key--ike_gateway))
- `ipsec_crypto_profile` (String) Ipsec crypto profile

Optional:

- `proxy_id` (Attributes List) IPv4 type of proxy_id values (see [below for nested schema](#nestedatt--auto_key--proxy_id))
- `proxy_id_v6` (Attributes List) IPv6 type of proxy_id values (see [below for nested schema](#nestedatt--auto_key--proxy_id_v6))

<a id="nestedatt--auto_key--ike_gateway"></a>
### Nested Schema for `auto_key.ike_gateway`

Optional:

- `name` (String) Name


<a id="nestedatt--auto_key--proxy_id"></a>
### Nested Schema for `auto_key.proxy_id`

Required:

- `name` (String) Name

Optional:

- `local` (String) Local
- `protocol` (Attributes) IPv4 type of proxy_id protocol values for TCP protocol (see [below for nested schema](#nestedatt--auto_key--proxy_id--protocol))
- `remote` (String) Remote

<a id="nestedatt--auto_key--proxy_id--protocol"></a>
### Nested Schema for `auto_key.proxy_id.protocol`

Optional:

- `number` (Number) IP protocol number
> ℹ️ **Note:** You must specify exactly one of `number`, `tcp`, and `udp`.
- `tcp` (Attributes) IPv4 type of proxy_id protocol values for TCP protocol
> ℹ️ **Note:** You must specify exactly one of `number`, `tcp`, and `udp`. (see [below for nested schema](#nestedatt--auto_key--proxy_id--protocol--tcp))
- `udp` (Attributes) IPv6 type of proxy_id protocol values for UDP protocol
> ℹ️ **Note:** You must specify exactly one of `number`, `tcp`, and `udp`. (see [below for nested schema](#nestedatt--auto_key--proxy_id--protocol--udp))

<a id="nestedatt--auto_key--proxy_id--protocol--tcp"></a>
### Nested Schema for `auto_key.proxy_id.protocol.tcp`

Optional:

- `local_port` (Number) Local port
- `remote_port` (Number) Remote port


<a id="nestedatt--auto_key--proxy_id--protocol--udp"></a>
### Nested Schema for `auto_key.proxy_id.protocol.udp`

Optional:

- `local_port` (Number) Local port
- `remote_port` (Number) Remote port




<a id="nestedatt--auto_key--proxy_id_v6"></a>
### Nested Schema for `auto_key.proxy_id_v6`

Required:

- `name` (String) Name

Optional:

- `local` (String) Local
- `protocol` (Attributes) IPv6 type of proxy_id protocol values for protocol (see [below for nested schema](#nestedatt--auto_key--proxy_id_v6--protocol))
- `remote` (String) Remote

<a id="nestedatt--auto_key--proxy_id_v6--protocol"></a>
### Nested Schema for `auto_key.proxy_id_v6.protocol`

Optional:

- `number` (Number) IP protocol number
> ℹ️ **Note:** You must specify exactly one of `number`, `tcp`, and `udp`.
- `tcp` (Attributes) IPv6 type of proxy_id protocol values for TCP protocol
> ℹ️ **Note:** You must specify exactly one of `number`, `tcp`, and `udp`. (see [below for nested schema](#nestedatt--auto_key--proxy_id_v6--protocol--tcp))
- `udp` (Attributes) IPv6 type of proxy_id protocol values for UDP protocol
> ℹ️ **Note:** You must specify exactly one of `number`, `tcp`, and `udp`. (see [below for nested schema](#nestedatt--auto_key--proxy_id_v6--protocol--udp))

<a id="nestedatt--auto_key--proxy_id_v6--protocol--tcp"></a>
### Nested Schema for `auto_key.proxy_id_v6.protocol.tcp`

Optional:

- `local_port` (Number) Local port
- `remote_port` (Number) Remote port


<a id="nestedatt--auto_key--proxy_id_v6--protocol--udp"></a>
### Nested Schema for `auto_key.proxy_id_v6.protocol.udp`

Optional:

- `local_port` (Number) Local port
- `remote_port` (Number) Remote port





<a id="nestedatt--tunnel_monitor"></a>
### Nested Schema for `tunnel_monitor`

Required:

- `destination_ip` (String) Destination IP to send ICMP probe

Optional:

- `enable` (Boolean) Enable tunnel monitoring on this tunnel
- `proxy_id` (String) Which proxy-id (or proxy-id-v6) the monitoring traffic will use
