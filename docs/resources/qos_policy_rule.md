---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "scm_qos_policy_rule Resource - scm"
subcategory: ""
description: |-
  QosPolicyRule resource
---

# scm_qos_policy_rule (Resource)

QosPolicyRule resource

## Example Usage

```terraform
# --- 2. ANCHOR QOS POLICY RULE (Used for relative positioning) ---
resource "scm_qos_policy_rule" "anchor_qos_rule" {
  name        = "anchor-qos-rule"
  description = "Base rule for testing 'before' and 'after' positioning."
  folder      = "All"
  position    = "pre"

  # Action: Set the traffic to QoS Class B
  action = {
    class = "2"
  }

  # Optional fields
  schedule = "non-work-hours" # Assuming a schedule object exists

  # DSCP Marking: Set traffic to Expedited Forwarding (EF)
  dscp_tos = {
    codepoints = [
      {
        name = "Set-EF" # Friendly name for the codepoint
        type = {
          ef = {} # Using the 'ef' (Expedited Forwarding) type, which is an empty object
        }
      }
    ]
  }
}

# --- 3. ABSOLUTE POSITIONING Examples ("top" and "bottom") ---

resource "scm_qos_policy_rule" "rule_top_qos_rule" {
  name        = "top-absolute-qos-rule"
  description = "Placed at the very TOP of the QoS rulebase (Highest Priority)."
  folder      = "All"
  position    = "pre"

  # POSITIONING: Sets rule at the absolute beginning of the rulebase
  relative_position = "top"

  # Action: Set the traffic to QoS Class 2
  action = {
    class = "2"
  }
}


resource "scm_qos_policy_rule" "rule_bottom_qos_rule" {
  name        = "bottom-absolute-qos-rule"
  description = "Placed at the very BOTTOM of the QoS rulebase (Lowest Priority)"
  folder      = "All"
  position    = "pre"

  # POSITIONING: Sets rule at the absolute end of the rulebase
  relative_position = "bottom"

  # Action: Set the traffic to QoS Class 3
  action = {
    class = "3"
  }
}

# --- 4. RELATIVE POSITIONING Examples ("before" and "after") ---

resource "scm_qos_policy_rule" "rule_before_anchor_qos" {
  name        = "before-anchor-qos-rule"
  description = "Positioned immediately BEFORE the anchor-qos-rule."
  folder      = "All"
  position    = "pre"

  # POSITIONING: Requires both relative_position and target_rule
  relative_position = "before"
  target_rule       = scm_qos_policy_rule.anchor_qos_rule.id # Reference anchor by its ID

  # Action: Set the traffic to QoS Class 3
  action = {
    class = "5"
  }


}

resource "scm_qos_policy_rule" "rule_after_anchor_qos" {
  name        = "after-anchor-qos-rule"
  description = "Positioned immediately AFTER the anchor-qos-rule."
  folder      = "All"
  position    = "pre"

  # POSITIONING: Requires both relative_position and target_rule
  relative_position = "after"
  target_rule       = scm_qos_policy_rule.anchor_qos_rule.id # Reference anchor by its ID

  # Action: Set the traffic to QoS Class 4
  action = {
    class = "4"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `action` (Attributes) Action (see [below for nested schema](#nestedatt--action))
- `name` (String) Name

### Optional

- `description` (String) Description
- `device` (String) The device in which the resource is defined
> ℹ️ **Note:** You must specify exactly one of `device`, `folder`, and `snippet`.
- `dscp_tos` (Attributes) Dscp tos (see [below for nested schema](#nestedatt--dscp_tos))
- `folder` (String) The folder in which the resource is defined
> ℹ️ **Note:** You must specify exactly one of `device`, `folder`, and `snippet`.
- `position` (String) The relative position of the rule
- `relative_position` (String) Relative positioning rule. String must be one of these: `"before"`, `"after"`, `"top"`, `"bottom"`. If not specified, rule is created at the bottom of the ruleset.
- `schedule` (String) Schedule
- `snippet` (String) The snippet in which the resource is defined
> ℹ️ **Note:** You must specify exactly one of `device`, `folder`, and `snippet`.
- `target_rule` (String) The name or UUID of the rule to position this rule relative to. Required when `relative_position` is `"before"` or `"after"`.

### Read-Only

- `id` (String) UUID of the resource
- `tfid` (String) The Terraform ID.

<a id="nestedatt--action"></a>
### Nested Schema for `action`

Optional:

- `class` (String) Class


<a id="nestedatt--dscp_tos"></a>
### Nested Schema for `dscp_tos`

Optional:

- `codepoints` (Attributes List) Codepoints (see [below for nested schema](#nestedatt--dscp_tos--codepoints))

<a id="nestedatt--dscp_tos--codepoints"></a>
### Nested Schema for `dscp_tos.codepoints`

Optional:

- `name` (String) Name
- `type` (Attributes) Type (see [below for nested schema](#nestedatt--dscp_tos--codepoints--type))

<a id="nestedatt--dscp_tos--codepoints--type"></a>
### Nested Schema for `dscp_tos.codepoints.type`

Optional:

- `af` (Attributes) Af
> ℹ️ **Note:** You must specify exactly one of `af`, `cs`, `custom`, `ef`, and `tos`. (see [below for nested schema](#nestedatt--dscp_tos--codepoints--type--af))
- `cs` (Attributes) Cs
> ℹ️ **Note:** You must specify exactly one of `af`, `cs`, `custom`, `ef`, and `tos`. (see [below for nested schema](#nestedatt--dscp_tos--codepoints--type--cs))
- `custom` (Attributes) Custom
> ℹ️ **Note:** You must specify exactly one of `af`, `cs`, `custom`, `ef`, and `tos`. (see [below for nested schema](#nestedatt--dscp_tos--codepoints--type--custom))
- `ef` (Attributes) Ef
> ℹ️ **Note:** You must specify exactly one of `af`, `cs`, `custom`, `ef`, and `tos`. (see [below for nested schema](#nestedatt--dscp_tos--codepoints--type--ef))
- `tos` (Attributes) Tos
> ℹ️ **Note:** You must specify exactly one of `af`, `cs`, `custom`, `ef`, and `tos`. (see [below for nested schema](#nestedatt--dscp_tos--codepoints--type--tos))

<a id="nestedatt--dscp_tos--codepoints--type--af"></a>
### Nested Schema for `dscp_tos.codepoints.type.af`

Optional:

- `codepoint` (String) Codepoint


<a id="nestedatt--dscp_tos--codepoints--type--cs"></a>
### Nested Schema for `dscp_tos.codepoints.type.cs`

Optional:

- `codepoint` (String) Codepoint


<a id="nestedatt--dscp_tos--codepoints--type--custom"></a>
### Nested Schema for `dscp_tos.codepoints.type.custom`

Optional:

- `codepoint` (Attributes) Codepoint (see [below for nested schema](#nestedatt--dscp_tos--codepoints--type--custom--codepoint))

<a id="nestedatt--dscp_tos--codepoints--type--custom--codepoint"></a>
### Nested Schema for `dscp_tos.codepoints.type.custom.codepoint`

Optional:

- `binary_value` (String) Binary value
- `codepoint_name` (String) Codepoint name



<a id="nestedatt--dscp_tos--codepoints--type--ef"></a>
### Nested Schema for `dscp_tos.codepoints.type.ef`


<a id="nestedatt--dscp_tos--codepoints--type--tos"></a>
### Nested Schema for `dscp_tos.codepoints.type.tos`

Optional:

- `codepoint` (String) Codepoint


## Import

The following command can be used to import a resource not managed by Terraform:

```bash
terraform import scm_qos_policy_rule.example folder:::id
```

or

```bash
terraform import scm_qos_policy_rule.example :snippet::id
```

or

```bash
terraform import scm_qos_policy_rule.example ::device:id
```

**Note:** Please provide just one of folder, snippet, or device for the import command.

